language: go
go:
  - 1.9.x

services:
  - docker

env:
  - RUN_CONTEXT=travis

cache:
    directories:
      # Cache the glide binary
      - ~/glide/
      # Glide's own cache
      - ~/.glide
      # Use a separate depbin folder to allow for caching.
      # The bin itself is then linked (ln -s) in the install-dependencies script
      - $GOPATH/pkg/depbin
      # Cache DAG data
      - /tmp/geth_test_network/.ethash

before_install:
  - npm install -g truffle@4.0.4

install:
  - scripts/install_glide.sh
  - glide install

script:
  - scripts/test_wrapper.sh